<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸš‡ Dashboard Omotenashi - Baguette & MÃ©tro</title>
    <link rel="stylesheet" href="/css/dashboard_omotenashi.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- ğŸš‡ Script Citymapper Simulated Data -->
    <script src="/js/citymapper_simulated_data.js"></script>
</head>
<body>
    <!-- ğŸ¯ HEADER OMOTENASHI -->
    <header class="dashboard-header">
        <div class="header-content">
            <h1>ğŸš‡ Dashboard Omotenashi</h1>
            <p class="subtitle">Anticipation intelligente des besoins voyageurs</p>
            <div class="last-update">
                <span>ğŸ• DerniÃ¨re mise Ã  jour:</span>
                <span id="lastUpdate">--</span>
                <span id="dataSource" class="data-source">ğŸ“¡ DonnÃ©es RATP RÃ©elles</span>
                <button id="refreshCitymapperData" class="btn-refresh" title="RafraÃ®chir les donnÃ©es RATP rÃ©elles">
                    ğŸ”„ DonnÃ©es RÃ©elles
                </button>
            </div>
        </div>
    </header>

    <!-- ğŸ¥‡ PRIORITÃ‰ MAXIMALE - MÃ©triques Permanentes -->
    <section class="priority-max">
        <h2>ğŸ¥‡ MÃ©triques Critiques</h2>
        
        <!-- ğŸš‡ Ã‰tat du RÃ©seau RATP -->
        <div class="metric-card ratp-status">
            <div class="metric-header">
                <h3>ğŸš‡ Ã‰tat du RÃ©seau RATP</h3>
                <div class="status-indicator" id="ratpStatusIndicator">ğŸŸ¡</div>
            </div>
            <div class="metric-content">
                <div class="metric-item">
                    <span class="label">PonctualitÃ© Globale:</span>
                    <span class="value" id="ponctualiteGlobale">--</span>
                </div>
                <div class="metric-item">
                    <span class="label">Total Lignes:</span>
                    <span class="value" id="totalLines">--</span>
                </div>
                <div class="metric-item">
                    <span class="label">Lignes PerturbÃ©es:</span>
                    <span class="value" id="lignesPerturbees">--</span>
                </div>
                <div class="lignes-list" id="lignesList">
                    <!-- Liste dynamique des lignes -->
                </div>
            </div>
        </div>

        <!-- â± Temps de Trajet -->
        <div class="metric-card travel-time">
            <div class="metric-header">
                <h3>â± Temps de Trajet</h3>
            </div>
            <div class="metric-content">
                <div class="metric-item">
                    <span class="label">Trajet Direct:</span>
                    <span class="value" id="trajetDirect">--</span>
                </div>
                <div class="metric-item">
                    <span class="label">Avec DÃ©tour Boulangerie:</span>
                    <span class="value" id="detourBoulangerie">--</span>
                </div>
                <div class="metric-item highlight">
                    <span class="label">Gain vs Citymapper:</span>
                    <span class="value" id="gainCitymapper">--</span>
                </div>
            </div>
        </div>

        <!-- ğŸ¥– Points d'IntÃ©rÃªt Boulangerie -->
        <div class="metric-card bakery-info">
            <div class="metric-header">
                <h3>ğŸ¥– Points d'IntÃ©rÃªt Boulangerie</h3>
            </div>
            <div class="metric-content">
                <div class="metric-item">
                    <span class="label">Distance Station:</span>
                    <span class="value" id="distanceStation">--</span>
                </div>
                <div class="metric-item">
                    <span class="label">Note Google:</span>
                    <span class="value" id="noteGoogle">--</span>
                </div>
            </div>
        </div>
    </section>

    <!-- ğŸ¥ˆ PRIORITÃ‰ SECONDAIRE - MÃ©triques en Clic -->
    <section class="priority-secondary">
        <h2>ğŸ¥ˆ DÃ©tails en Clic</h2>
        
        <!-- ğŸ“Š DÃ©tail d'une Ligne -->
        <div class="metric-card line-detail" id="lineDetailCard" style="display: none;">
            <div class="metric-header">
                <h3>ğŸ“Š DÃ©tail Ligne <span id="selectedLineName">--</span></h3>
                <button class="close-btn" onclick="hideLineDetail()">âœ•</button>
            </div>
            <div class="metric-content">
                <div class="metric-item">
                    <span class="label">Prochain Passage:</span>
                    <span class="value" id="prochainPassage">--</span>
                </div>
                <div class="metric-item">
                    <span class="label">Cause Retard:</span>
                    <span class="value" id="causeRetard">--</span>
                </div>
                <div class="metric-item">
                    <span class="label">Affluence:</span>
                    <div class="heatmap" id="affluenceHeatmap">
                        <div class="heatmap-bar" data-level="1"></div>
                        <div class="heatmap-bar" data-level="2"></div>
                        <div class="heatmap-bar" data-level="3"></div>
                        <div class="heatmap-bar" data-level="4"></div>
                        <div class="heatmap-bar" data-level="5"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ğŸª DÃ©tail Boulangerie -->
        <div class="metric-card bakery-detail" id="bakeryDetailCard" style="display: none;">
            <div class="metric-header">
                <h3>ğŸª DÃ©tail Boulangerie</h3>
                <button class="close-btn" onclick="hideBakeryDetail()">âœ•</button>
            </div>
            <div class="metric-content">
                <div class="metric-item">
                    <span class="label">Horaires:</span>
                    <span class="value" id="horairesBoulangerie">--</span>
                </div>
                <div class="metric-item">
                    <span class="label">Recommandation IA:</span>
                    <span class="value" id="recommandationIA">--</span>
                </div>
                <div class="metric-item">
                    <span class="label">Conseil Heures:</span>
                    <span class="value" id="conseilHeures">--</span>
                </div>
            </div>
        </div>
    </section>

    <!-- ğŸ¥‰ PRIORITÃ‰ TERTIAIRE - Analytics & Performance -->
    <section class="priority-tertiary">
        <h2>ğŸ¥‰ Analytics & Performance</h2>
        
        <!-- ğŸ¤– Performance IA -->
        <div class="metric-card ai-performance">
            <div class="metric-header">
                <h3>ğŸ¤– Performance IA</h3>
            </div>
            <div class="metric-content">
                <div class="metric-item">
                    <span class="label">Temps RÃ©ponse:</span>
                    <span class="value" id="tempsReponseIA">--</span>
                </div>
                <div class="metric-item">
                    <span class="label">PrÃ©cision Conseils:</span>
                    <span class="value" id="precisionConseils">--</span>
                </div>
            </div>
        </div>

        <!-- ğŸ“ˆ Analytics Utilisateur -->
        <div class="metric-card user-analytics">
            <div class="metric-header">
                <h3>ğŸ“ˆ Analytics Utilisateur</h3>
            </div>
            <div class="metric-content">
                <div class="metric-item">
                    <span class="label">RequÃªtes par Langue:</span>
                    <div class="language-chart" id="languageChart">
                        <canvas id="languageChartCanvas"></canvas>
                    </div>
                </div>
                <div class="metric-item">
                    <span class="label">Taux Conversion:</span>
                    <span class="value" id="tauxConversion">--</span>
                </div>
            </div>
        </div>

        <!-- ğŸŒ Couverture RÃ©seau -->
        <div class="metric-card network-coverage">
            <div class="metric-header">
                <h3>ğŸŒ Couverture RÃ©seau</h3>
            </div>
            <div class="metric-content">
                <div class="metric-item">
                    <span class="label">Stations avec Boulangeries:</span>
                    <span class="value" id="stationsBoulangeries">--</span>
                </div>
                <div class="metric-item">
                    <span class="label">QualitÃ© Moyenne:</span>
                    <span class="value" id="qualiteMoyenne">--</span>
                </div>
            </div>
        </div>
    </section>

    <!-- ğŸ”„ RÃ‰FRESH & ACTIONS -->
    <section class="actions-section">
        <div class="action-buttons">
            <button class="btn btn-primary" onclick="refreshDashboard()">
                ğŸ”„ Actualiser Dashboard
            </button>
            <button class="btn btn-secondary" onclick="exportData()">
                ğŸ“Š Exporter DonnÃ©es
            </button>
        </div>
    </section>

    <!-- ğŸ“Š FOOTER -->
    <footer class="dashboard-footer">
        <p>ğŸš‡ Dashboard Omotenashi - Baguette & MÃ©tro Enterprise</p>
        <p>Anticipation intelligente des besoins voyageurs</p>
    </footer>

    <script src="/js/dashboard-transmitter.js"></script>
    <script src="/js/dashboard_omotenashi.js"></script>
</body>
</html>
